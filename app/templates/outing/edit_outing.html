{% extends "base.html" %}

{% block app_content %}
{#https://www.rmedgar.com/blog/dynamic_fields_flask_wtf#}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="{{ url_for('static', filename='js/pitch_table.js') }}"></script>

    <h1>Edit Outing</h1>
    <form method="post" novalidate>
        {{ form.hidden_tag() }} {# Preventing CSRF attacks #}
        <p>You can't change the opponent because the batter_id's are based on the opponent</p>
        <p>If you want to change the opponent, you have to delete the outing and start over</p>
        <p>
            {{ form.pitcher.label }}<br>
            <select id="pitcher" name="pitcher">
                {% for p in all_pitchers %}
                    <option value="{{p.username}}" {% if p.id == this_pitcher.id %} selected='selected' {% endif %}>{{p}}</option>
                {% endfor %}
            </select>
            {% for error in form.pitcher.errors %}
            <span style="color: red;">[{{ error }}]</span>
            {% endfor %}
        </p>
        <p>
            {{ form.date.label }}<br>
            {{ form.date(class='datepicker', value=outing.date) }}<br>
            {% for error in form.date.errors %}
            <span style="color: red;">[{{ error }}]</span>
            {% endfor %}
        </p>
        <p style="display: none">
            {{ form.opponent.label }}<br>
            {{ form.opponent() }}
            {% for error in form.opponent.errors %}
            <span style="color: red;">[{{ error }}]</span>
            {% endfor %}
        </p>
        <p>
            {{ form.season.label }}<br>
            <select id="season" name="season">
                {% for s in all_seasons %}
                    <option value="{{s}}" {% if s.id == this_season.id %} selected='selected' {% endif %}>{{s}}</option>
                {% endfor %}
            </select>
            {% for error in form.season.errors %}
            <span style="color: red;">[{{ error }}]</span>
            {% endfor %}
        </p><br>
        <p>{{ form.submit() }}</p>
    </form>
    <a href="{{ url_for('delete_outing', outing_id=outing.id) }}">Delete Outing</a>
{% endblock %}